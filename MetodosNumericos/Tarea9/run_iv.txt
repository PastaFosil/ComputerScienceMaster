#!/bin/bash

gcc diferencias_divididas.c -o dd -lm

out_file="iv_inter.txt"
> $out_file

./dd >> $out_file

gnuplot -persist <<-EOF
    set terminal pngcairo enhanced size 800,600
    set output 'iv.png'

    set title "Interpolacion de mediciones de intensidad-voltaje"
    set xlabel "Intensidad de corriente (A/cm^2)"
    set ylabel "Voltaje (V)"
    set grid

    set key top right

    plot "i-v.txt" using 1:2 with linespoints lc rgb "green" title "Mediciones",\
         "$out_file" using 1:2 with points lc rgb "red" title "Interpolacion"
EOF